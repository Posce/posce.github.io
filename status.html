<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/status.min.css">
  <title>Status</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
  <script type="text/javascript">
    var spreadsheet_url = 'https://docs.google.com/spreadsheets/d/17gBHxdplEGLlI1kiE3tay2NdIRFbyHpfAzJ-f17ZIXM/pub?output=csv';

    function init() {
      Papa.parse(spreadsheet_url, {
        download: true,
        header: true,
        complete: BarsUpdater
      })
    }

    window.addEventListener('DOMContentLoaded', init)

    function BarsUpdater(results) {
      
      var data = results.data;

      document.getElementById("hBar").dataset.total = data[0].Vita;
      document.getElementById("hBar").dataset.damage = data[1].Vita;
      document.getElementById("hBar").dataset.value = data[2].Vita;
      document.getElementById("sBar").dataset.total = data[0].Stamina;
      document.getElementById("sBar").dataset.damage = data[1].Stamina;
      document.getElementById("sBar").dataset.value = data[2].Stamina;
      document.getElementById("mBar").dataset.total = data[0].Senno;
      document.getElementById("mBar").dataset.damage = data[1].Senno;
      document.getElementById("mBar").dataset.value = data[2].Senno;
    }       
  </script>
</head>
<body>
  <div class="container">
    <h1>Giovanni &nbsp;</h1>
    <h1>Ranone</h1>
    <i>Cucinatore Umano</i>
    <h3>Vita</h3>
    <div class="health-bar" id="hBar" data-total="30" data-value="10" data-damage="2">
      <div class="bar" id="bar">
          <div class="hit" id="hit"></div>
      </div>
    </div>
    <h3>Stamina</h3>
    <div class="health-bar" id="sBar" data-total="10" data-value="6" data-damage="1">
      <div class="bar" id="bar2">
          <div class="hit" id="hit2"></div>
      </div>
    </div>
    <h3>Senno</h3>
    <div class="health-bar" id="mBar" data-total="16" data-value="-6" data-damage="0">
      <div class="bar" id="bar3">
          <div class="hit" id="hit3"></div>
      </div>
    </div>
  </div>
  <script src="./js/lifebar.js"></script>
</body>
</html>